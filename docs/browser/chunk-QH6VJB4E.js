import{Ea as o,Gb as c,Jb as i,La as l,S as s,Xb as m,ka as a,oa as n}from"./chunk-GKB44EVQ.js";var d=class r{constructor(t){this.el=t;c(()=>{let e=this.src();e&&this.isIntersecting&&this.isBrowser&&this.loadImage(e)})}src=i.required({alias:"appLazyImage"});placeholder=i('data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 300 300"%3E%3Crect fill="%23111827" width="300" height="300"/%3E%3Ctext fill="%2300ff9f" font-family="Arial" font-size="20" x="50%25" y="50%25" text-anchor="middle" dominant-baseline="middle"%3ECarregando...%3C/text%3E%3C/svg%3E');observer;platformId=s(n);isBrowser=m(this.platformId);isIntersecting=!1;ngOnInit(){if(this.el.nativeElement.src=this.placeholder(),!this.isBrowser){this.el.nativeElement.src=this.src();return}this.observer=new IntersectionObserver(t=>{t.forEach(e=>{e.isIntersecting&&(this.isIntersecting=!0,this.loadImage(this.src()),this.observer?.disconnect())})},{rootMargin:"50px",threshold:.01}),this.observer.observe(this.el.nativeElement)}loadImage(t){if(!this.isBrowser)return;let e=new Image;e.onload=()=>{this.el.nativeElement.src=t,this.el.nativeElement.classList.add("lazy-loaded")},e.onerror=()=>{this.el.nativeElement.src="https://via.placeholder.com/300x300?text=Erro+ao+carregar",this.el.nativeElement.classList.add("lazy-error")},e.src=t}ngOnDestroy(){this.isBrowser&&this.observer?.disconnect()}static \u0275fac=function(e){return new(e||r)(o(a))};static \u0275dir=l({type:r,selectors:[["img","appLazyImage",""]],inputs:{src:[1,"appLazyImage","src"],placeholder:[1,"placeholder"]}})};export{d as a};
