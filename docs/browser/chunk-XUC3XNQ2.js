import{a as z,b as A,c as B}from"./chunk-VHCAXAHE.js";import"./chunk-PT2JM3JA.js";import{a as H}from"./chunk-5NDLQLQ5.js";import{c as I,e as F,f as N}from"./chunk-NWNTYUMJ.js";import{a as q}from"./chunk-A2F7EYKU.js";import"./chunk-QH6VJB4E.js";import{a as U,b as j,e as W,l as $}from"./chunk-N453EWQN.js";import{a as G}from"./chunk-MS2DQ2Q7.js";import{$a as y,Fb as k,Ja as O,S as C,Ta as u,Ua as v,Wa as M,X as _,Xa as b,Xb as V,Y as g,Ya as h,Za as a,_a as r,db as f,fa as p,fb as d,hb as c,oa as L,ob as w,qb as o,rb as x,sa as D,sb as S,tb as P,ua as l,ub as T,vb as E,wb as R}from"./chunk-GKB44EVQ.js";var K=(i,t)=>t.id;function Q(i,t){if(i&1&&(a(0,"p",25),o(1),r()),i&2){let e=c(3);l(),x(e.list().description)}}function X(i,t){if(i&1){let e=f();a(0,"div",23)(1,"h1",24),o(2),r(),u(3,Q,2,1,"p",25),a(4,"span",26),o(5),r()(),a(6,"div",27)(7,"button",11),d("click",function(){_(e);let s=c(2);return g(s.onEditList())}),o(8," \u270F\uFE0F Editar "),r(),a(9,"button",28),d("click",function(){_(e);let s=c(2);return g(s.onOpenSearchModal())}),o(10," \u2795 Adicionar Personagens "),r(),a(11,"button",13),d("click",function(){_(e);let s=c(2);return g(s.onDeleteList())}),o(12," \u{1F5D1}\uFE0F Excluir Lista "),r()()}if(i&2){let e=c(2);l(2),x(e.list().name),l(),v(e.list().description?3:-1),l(2),P(" ",e.list().characters.length," ",e.list().characters.length===1?"personagem":"personagens"," ")}}function Y(i,t){if(i&1){let e=f();a(0,"div",19)(1,"app-add-list-form",29),d("listUpdated",function(s){_(e);let m=c(2);return g(m.onUpdateList(s))})("cancelled",function(){_(e);let s=c(2);return g(s.onCancelEdit())}),r()()}if(i&2){let e=c(2);l(),h("editMode",!0)("initialName",e.list().name)("initialDescription",e.list().description||"")}}function Z(i,t){if(i&1){let e=f();a(0,"app-character-card",31),d("viewDetails",function(s){_(e);let m=c(3);return g(m.onViewDetails(s))})("removeFromList",function(s){_(e);let m=c(3);return g(m.onConfirmRemove(s))}),r()}if(i&2){let e=t.$implicit;h("character",e)("showRemoveButton",!0)}}function ee(i,t){if(i&1&&(a(0,"div",21),M(1,Z,1,2,"app-character-card",30,K),r()),i&2){let e=c(2);l(),b(e.list().characters)}}function te(i,t){if(i&1){let e=f();a(0,"div",22)(1,"span",32),o(2,"\u{1F464}"),r(),a(3,"h3",33),o(4,"Nenhum personagem adicionado"),r(),a(5,"p",34),o(6," Adicione personagens \xE0 sua lista para come\xE7ar a organizar seus favoritos! "),r(),a(7,"button",28),d("click",function(){_(e);let s=c(2);return g(s.onOpenSearchModal())}),o(8," \u2795 Adicionar Personagens "),r()()}}function ie(i,t){if(i&1&&(a(0,"section",15)(1,"div",16)(2,"div",17)(3,"a",18),o(4," \u2190 Voltar para listas "),r(),u(5,X,13,4)(6,Y,2,3,"div",19),r()()(),a(7,"section",20)(8,"div",16),u(9,ee,3,0,"div",21)(10,te,9,0,"div",22),r()()),i&2){let e=c();l(5),v(e.isEditingList()?6:5),l(4),v(e.hasCharacters()?9:10)}}function ne(i,t){i&1&&(a(0,"div",6)(1,"p"),o(2,"Buscando..."),r()())}function ae(i,t){if(i&1){let e=f();a(0,"div",35),y(1,"img",36),a(2,"div",37)(3,"h4",38),o(4),r(),a(5,"p",39),o(6),r()(),a(7,"button",40),d("click",function(){let s=_(e).$implicit,m=c(2);return g(m.onAddCharacter(s))}),o(8),r()()}if(i&2){let e=t.$implicit,n=c(2);l(),h("src",e.image,D)("alt",e.name),l(3),x(e.name),l(2),P("",e.status," - ",e.species),l(),w("btn-secondary",n.isCharacterInList(e))("btn-primary",!n.isCharacterInList(e)),h("disabled",n.isCharacterInList(e)),l(),S(" ",n.isCharacterInList(e)?"\u2713 Adicionado":"+ Adicionar"," ")}}function re(i,t){if(i&1&&(a(0,"div",7),M(1,ae,9,11,"div",35,K),r()),i&2){let e=c();l(),b(e.searchResults())}}function oe(i,t){i&1&&(a(0,"p",8),o(1,"Nenhum personagem encontrado."),r())}function se(i,t){i&1&&(a(0,"p",9),o(1,"Digite pelo menos 2 caracteres para buscar."),r())}function le(i,t){if(i&1&&(a(0,"div",12)(1,"p"),o(2,"Tem certeza que deseja remover "),a(3,"strong"),o(4),r(),o(5," desta lista?"),r()()),i&2){let e=c();l(4),x(e.characterToRemove().name)}}var J=class i{platformId=C(L);isBrowser=V(this.platformId);route=C(I);router=C(F);listsState=C(q);apiService=C(G);list=p(null);isEditingList=p(!1);isSearchModalOpen=p(!1);searchResults=p([]);searchTerm=p("");isSearching=p(!1);characterToRemove=p(null);isRemoveModalOpen=p(!1);isDetailModalOpen=p(!1);selectedCharacter=p(null);hasCharacters=k(()=>{let t=this.list();return t?t.characters.length>0:!1});ngOnInit(){let t=this.route.snapshot.paramMap.get("id");t?this.loadList(t):this.router.navigate(["/my-lists"])}loadList(t){let e=this.listsState.getListById(t);e?this.list.set(e):this.router.navigate(["/my-lists"])}onEditList(){this.isEditingList.set(!0)}onUpdateList(t){let e=this.list();e&&(this.listsState.updateList(e.id,t),this.loadList(e.id),this.isEditingList.set(!1))}onCancelEdit(){this.isEditingList.set(!1)}onDeleteList(){let t=this.list();t&&confirm(`Tem certeza que deseja excluir a lista "${t.name}"?`)&&(this.listsState.deleteList(t.id),this.router.navigate(["/my-lists"]))}onOpenSearchModal(){this.isSearchModalOpen.set(!0),this.searchCharacters()}onCloseSearchModal(){this.isSearchModalOpen.set(!1),this.searchTerm.set(""),this.searchResults.set([])}onSearchChange(t){this.searchTerm.set(t),t.length>=2?this.searchCharacters():this.searchResults.set([])}searchCharacters(){this.isSearching.set(!0),this.apiService.getCharacters({page:1,name:this.searchTerm()||void 0}).subscribe({next:t=>{this.searchResults.set(t.results),this.isSearching.set(!1)},error:()=>{this.searchResults.set([]),this.isSearching.set(!1)}})}onAddCharacter(t){let e=this.list();e&&this.listsState.addCharacterToList(e.id,t)&&(this.loadList(e.id),this.onCloseSearchModal())}onConfirmRemove(t){this.characterToRemove.set(t),this.isRemoveModalOpen.set(!0)}onRemoveCharacter(){let t=this.list(),e=this.characterToRemove();t&&e&&(this.listsState.removeCharacterFromList(t.id,e.id),this.loadList(t.id)),this.isRemoveModalOpen.set(!1),this.characterToRemove.set(null)}onCancelRemove(){this.isRemoveModalOpen.set(!1),this.characterToRemove.set(null)}isCharacterInList(t){let e=this.list();return e?e.characters.some(n=>n.id===t.id):!1}onViewDetails(t){this.selectedCharacter.set(t),this.isDetailModalOpen.set(!0)}onCloseDetailModal(){this.isDetailModalOpen.set(!1),setTimeout(()=>{this.selectedCharacter.set(null)},300)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=O({type:i,selectors:[["app-list-detail-page"]],decls:25,vars:8,consts:[[1,"list-detail-page"],[3,"close","isOpen"],["modalTitle",""],[1,"search-modal"],[1,"search-field"],["type","text","placeholder","Digite o nome do personagem...",1,"search-input",3,"ngModelChange","ngModel"],[1,"search-loading"],[1,"search-results"],[1,"no-results"],[1,"search-hint"],["modalFooter",""],["type","button",1,"btn","btn-secondary",3,"click"],[1,"remove-modal"],["type","button",1,"btn","btn-danger",3,"click"],[3,"close","isOpen","character"],[1,"list-detail-page__hero"],[1,"container"],[1,"list-detail-page__header"],["routerLink","/my-lists",1,"back-button"],[1,"edit-form"],[1,"list-detail-page__content"],[1,"characters-grid"],[1,"empty-state"],[1,"list-info"],[1,"list-info__title"],[1,"list-info__description"],[1,"list-info__count"],[1,"list-actions"],["type","button",1,"btn","btn-primary",3,"click"],[3,"listUpdated","cancelled","editMode","initialName","initialDescription"],[3,"character","showRemoveButton"],[3,"viewDetails","removeFromList","character","showRemoveButton"],[1,"empty-state__icon"],[1,"empty-state__title"],[1,"empty-state__description"],[1,"search-result-item"],[1,"search-result-item__image",3,"src","alt"],[1,"search-result-item__info"],[1,"search-result-item__name"],[1,"search-result-item__status"],["type","button",1,"btn","btn-sm",3,"click","disabled"]],template:function(e,n){e&1&&(a(0,"div",0),u(1,ie,11,2),a(2,"app-modal",1),d("close",function(){return n.onCloseSearchModal()}),a(3,"span",2),o(4,"Buscar Personagens"),r(),a(5,"div",3)(6,"div",4)(7,"input",5),R("ngModelChange",function(m){return E(n.searchTerm,m)||(n.searchTerm=m),m}),d("ngModelChange",function(m){return n.onSearchChange(m)}),r()(),u(8,ne,3,0,"div",6)(9,re,3,0,"div",7)(10,oe,2,0,"p",8)(11,se,2,0,"p",9),r(),a(12,"div",10)(13,"button",11),d("click",function(){return n.onCloseSearchModal()}),o(14," Fechar "),r()()(),a(15,"app-modal",1),d("close",function(){return n.onCancelRemove()}),a(16,"span",2),o(17,"Remover Personagem"),r(),u(18,le,6,1,"div",12),a(19,"div",10)(20,"button",11),d("click",function(){return n.onCancelRemove()}),o(21," Cancelar "),r(),a(22,"button",13),d("click",function(){return n.onRemoveCharacter()}),o(23," Remover "),r()()(),a(24,"app-character-detail-modal",14),d("close",function(){return n.onCloseDetailModal()}),r()()),e&2&&(l(),v(n.list()?1:-1),l(),h("isOpen",n.isSearchModalOpen()),l(5),T("ngModel",n.searchTerm),l(),v(n.isSearching()?8:n.searchResults().length>0?9:n.searchTerm().length>=2?10:11),l(7),h("isOpen",n.isRemoveModalOpen()),l(3),v(n.characterToRemove()?18:-1),l(6),h("isOpen",n.isDetailModalOpen())("character",n.selectedCharacter()))},dependencies:[N,H,A,z,$,U,j,W,B],styles:[".list-detail-page[_ngcontent-%COMP%]{min-height:100vh}.list-detail-page__hero[_ngcontent-%COMP%]{padding:var(--spacing-2xl) 0;background:linear-gradient(180deg,var(--bg-secondary) 0%,var(--bg-primary) 100%);border-bottom:2px solid var(--gray-700)}.list-detail-page__header[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-xl)}.list-detail-page__content[_ngcontent-%COMP%]{padding:var(--spacing-3xl) 0}.back-button[_ngcontent-%COMP%]{color:var(--primary-green);text-decoration:none;font-weight:600;transition:all .2s ease;display:inline-flex;align-items:center;gap:var(--spacing-xs)}.back-button[_ngcontent-%COMP%]:hover{gap:var(--spacing-sm);text-shadow:0 0 10px rgba(0,255,159,.5)}.list-info__title[_ngcontent-%COMP%]{font-size:clamp(2rem,5vw,3rem);font-weight:900;color:var(--text-primary);margin:0 0 var(--spacing-md);text-shadow:var(--shadow-glow)}.list-info__description[_ngcontent-%COMP%]{font-size:1.125rem;color:var(--text-secondary);margin:0 0 var(--spacing-md);line-height:1.6}.list-info__count[_ngcontent-%COMP%]{display:inline-block;background:var(--primary-green);color:var(--gray-900);padding:var(--spacing-xs) var(--spacing-md);border-radius:var(--radius-full);font-size:.875rem;font-weight:700;text-transform:uppercase}.list-actions[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-md);flex-wrap:wrap}.btn-danger[_ngcontent-%COMP%]{background:var(--error);color:#fff}.btn-danger[_ngcontent-%COMP%]:hover:not(:disabled){background:#d32f2f}.edit-form[_ngcontent-%COMP%]{width:100%;max-width:600px}.characters-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:var(--spacing-lg)}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:var(--spacing-3xl);max-width:500px;margin:0 auto}.empty-state__icon[_ngcontent-%COMP%]{font-size:5rem;display:block;margin-bottom:var(--spacing-lg);opacity:.5}.empty-state__title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:var(--text-primary);margin:0 0 var(--spacing-md)}.empty-state__description[_ngcontent-%COMP%]{font-size:1rem;color:var(--text-secondary);margin:0 0 var(--spacing-xl);line-height:1.6}.search-modal[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-lg)}.search-field[_ngcontent-%COMP%]{margin-bottom:var(--spacing-md)}.search-input[_ngcontent-%COMP%]{width:100%;padding:var(--spacing-md);background:var(--bg-tertiary);border:1px solid var(--gray-600);border-radius:var(--radius-md);color:var(--text-primary);font-size:1rem;font-family:inherit;transition:all .2s ease}.search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-green);box-shadow:0 0 0 3px #00ff9f1a}.search-input[_ngcontent-%COMP%]::placeholder{color:var(--text-muted)}.search-loading[_ngcontent-%COMP%], .no-results[_ngcontent-%COMP%], .search-hint[_ngcontent-%COMP%]{text-align:center;color:var(--text-secondary);padding:var(--spacing-xl)}.search-results[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-md);max-height:400px;overflow-y:auto}.search-result-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-md);padding:var(--spacing-md);background:var(--bg-tertiary);border:1px solid var(--gray-600);border-radius:var(--radius-md);transition:all .2s ease}.search-result-item[_ngcontent-%COMP%]:hover{border-color:var(--primary-green)}.search-result-item__image[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:var(--radius-md);object-fit:cover}.search-result-item__info[_ngcontent-%COMP%]{flex:1;min-width:0}.search-result-item__name[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:var(--text-primary);margin:0 0 var(--spacing-xs);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.search-result-item__status[_ngcontent-%COMP%]{font-size:.875rem;color:var(--text-secondary);margin:0}.btn-sm[_ngcontent-%COMP%]{padding:var(--spacing-xs) var(--spacing-md);font-size:.875rem;white-space:nowrap}.remove-modal[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;color:var(--text-secondary);text-align:center;margin:0}.remove-modal[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--primary-green)}@media (max-width: 768px){.list-actions[_ngcontent-%COMP%]{flex-direction:column}.list-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%}.characters-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.search-result-item[_ngcontent-%COMP%]{flex-wrap:wrap}.search-result-item[_ngcontent-%COMP%]   .btn-sm[_ngcontent-%COMP%]{width:100%}}"]})};export{J as ListDetailPage};
