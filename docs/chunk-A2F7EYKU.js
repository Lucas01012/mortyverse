import{Fb as u,N as l,R as m,S as g,Xb as p,a as n,b as c,fa as f,oa as h}from"./chunk-GKB44EVQ.js";var d=class o{platformId=g(h);isBrowser=p(this.platformId);setItem(e,t){if(this.isBrowser)try{let r=JSON.stringify(t);localStorage.setItem(e,r)}catch(r){console.error("Error saving to localStorage:",r)}}getItem(e){if(!this.isBrowser)return null;try{let t=localStorage.getItem(e);return t?JSON.parse(t):null}catch(t){return console.error("Error reading from localStorage:",t),null}}removeItem(e){if(this.isBrowser)try{localStorage.removeItem(e)}catch(t){console.error("Error removing from localStorage:",t)}}clear(){if(this.isBrowser)try{localStorage.clear()}catch(e){console.error("Error clearing localStorage:",e)}}static \u0275fac=function(t){return new(t||o)};static \u0275prov=l({token:o,factory:o.\u0275fac,providedIn:"root"})};var v=class o{constructor(e){this.storage=e;this.loadFromStorage()}STORAGE_KEY="mortyverse_custom_lists";lists=f([]);allLists=u(()=>this.lists());listCount=u(()=>this.lists().length);loadFromStorage(){let e=this.storage.getItem(this.STORAGE_KEY);e&&this.lists.set(e)}saveToStorage(){this.storage.setItem(this.STORAGE_KEY,this.lists())}createList(e){let t={id:crypto.randomUUID(),name:e.name,description:e.description,characters:[],createdAt:new Date,updatedAt:new Date};return this.lists.update(r=>[...r,t]),this.saveToStorage(),t}updateList(e,t){let r=this.lists().findIndex(s=>s.id===e);return r===-1?!1:(this.lists.update(s=>{let i=[...s];return i[r]=c(n(n({},i[r]),t),{updatedAt:new Date}),i}),this.saveToStorage(),!0)}deleteList(e){let t=this.lists(),r=t.filter(s=>s.id!==e);return r.length===t.length?!1:(this.lists.set(r),this.saveToStorage(),!0)}getListById(e){return this.lists().find(t=>t.id===e)}addCharacterToList(e,t){let r=this.lists().findIndex(s=>s.id===e);return r===-1?!1:(this.lists.update(s=>{let i=[...s],a=i[r];return a.characters.some(S=>S.id===t.id)?s:(i[r]=c(n({},a),{characters:[...a.characters,t],updatedAt:new Date}),i)}),this.saveToStorage(),!0)}removeCharacterFromList(e,t){let r=this.lists().findIndex(s=>s.id===e);return r===-1?!1:(this.lists.update(s=>{let i=[...s];return i[r]=c(n({},i[r]),{characters:i[r].characters.filter(a=>a.id!==t),updatedAt:new Date}),i}),this.saveToStorage(),!0)}static \u0275fac=function(t){return new(t||o)(m(d))};static \u0275prov=l({token:o,factory:o.\u0275fac,providedIn:"root"})};export{v as a};
