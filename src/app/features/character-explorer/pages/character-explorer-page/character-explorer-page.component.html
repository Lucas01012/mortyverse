
@if (isLoading()) {
  <div class="character-explorer__loading-overlay">
    <div class="loading-spinner"></div>
  </div>
}

<div class="character-explorer">

  <section class="character-explorer__hero">
    <div class="container">
      <h1 class="character-explorer__title">
        Explore o <span class="character-explorer__title-highlight">Multiverso</span>
      </h1>
      <p class="character-explorer__subtitle">
        Descubra todos os personagens do universo de Rick and Morty
      </p>
    </div>
  </section>

  <section class="character-explorer__search">
    <div class="container">
      <app-search-bar 
        [searchTerm]="searchTerm()"
        [statusFilter]="statusFilter()"
        [genderFilter]="genderFilter()"
        (searchChange)="onSearchChange($event)"
        (statusChange)="onStatusChange($event)"
        (genderChange)="onGenderChange($event)"
      />
    </div>
  </section>

  <section class="character-explorer__results">
    <div class="container">
      
      @if (!isLoading() && allCharacters().length > 0) {
        <div class="character-explorer__info">
          <p class="character-explorer__count">
            Mostrando <strong>{{ allCharacters().length }}</strong> personagens
          </p>
        </div>
      }

      <app-character-list 
        [characters]="paginatedCharacters()"
        [isLoading]="isLoading()"
        (viewDetails)="onViewDetails($event)"
        (addToList)="onAddToList($event)"
      />

      <div class="character-explorer__pagination">
        <app-pagination 
          [currentPage]="currentPage()"
          [totalPages]="totalPages()"
          (pageChange)="onPageChange($event)"
        />
      </div>

    </div>
  </section>

  <app-character-detail-modal
    [isOpen]="isModalOpen()"
    [character]="selectedCharacter()"
    (close)="onCloseModal()"
  />

  @if (characterToAdd()) {
    <app-add-to-list-modal
      [character]="characterToAdd()!"
      [isOpen]="isAddToListModalOpen()"
      (close)="onCloseAddToListModal()"
      (added)="onCharacterAdded()"
    />
  }

</div>
